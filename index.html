<!DOCTYPE html>
 <meta charset="utf-8">
 <html>
   <head>
     <!-- Load d3.js -->
     <script src="https://d3js.org/d3.v5.min.js"></script>
   </head>
   <body onload='init()'>
        <svg id="viz" width=600 height=600>
        </svg>

        <script>

        async function init() {
            //Read the data
            const data = await d3.csv("data/obesity_dataset.csv");

            data.forEach(d=>{
                d.GDP=+d.GDP; 
                d.Pct_Adults_Obese=+d.Pct_Adults_Obese; 
                d.Pct_Adults_Overweight=+d.Pct_Adults_Overweight;
                d.Pct_Deaths_Obesity=+d.Pct_Deaths_Obesity;
            });

            var margin=50;
            var width=500;
            var height=500;
            var base= margin+height

            // Add Y axis
            var y = d3.scaleLog()
                .domain([10, 60])
                .range([ height, 0]);
            var yAxis = d3.axisLeft(y)
                .tickValues([10,20,30,40,50,60])
                .tickFormat(d3.format("~s"));
            //Create x-axis
            var x = d3.scaleLog()
                .domain([200, 100000])
                .range([ 0, width ]);
            var xAxis = d3.axisBottom(x)
                .tickValues([1000,10000,20000,50000,75000,100000])
                .tickFormat(d3.format("~s"));

            d3.select("svg").append("g")
                .attr("transform", "translate(" + margin + "," + margin + ")")
                .call(yAxis);
            d3.select("svg").append("g")
                .attr("transform", "translate(" + margin + "," + base + ")")
                .call(xAxis);        

            // Add dots
            d3.select("svg").append('g')
                .attr("transform", "translate(" + margin + "," + margin + ")")
                .selectAll("dot")
                .data(data)
                .enter()
                .append("circle")
                .attr("cx", function (d) { return x(d.GDP);})
                .attr("cy", function (d) { return y(d.Pct_Adults_Obese);} )
                .attr("r", function (d){ return 2});


        }
            
        </script>

   </body>
 </html>